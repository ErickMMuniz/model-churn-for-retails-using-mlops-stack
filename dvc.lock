schema: '2.0'
stages:
  prepare:
    cmd: python src/preparation.py
    deps:
    - path: data/transacciones_retail.csv
      hash: md5
      md5: 5d295417e543b29d40366cd75fb4c75a
      size: 45580638
    - path: src/preparation.py
      hash: md5
      md5: 5ee4a0ad6d78972d8447230674c8b0f9
      size: 1637
    params:
      params.yaml:
        preparation.columns:
        - InvoiceNo
        - StockCode
        - Description
        - Quantity
        - InvoiceDate
        - UnitPrice
        - CustomerID
        - Country
        preparation.sample_size: 1.0
        preparation.types:
          columns:
            InvoiceNo: str
            StockCode: str
            Description: str
            Quantity: int
            InvoiceDate: datetime
            UnitPrice: float
            CustomerID: int
            Country: str
    outs:
    - path: data/prepared_data.csv
      hash: md5
      md5: ec6564a35bc0909a48d4314811e39d54
      size: 35941501
  preparation:
    cmd: python src/preparation.py
    deps:
    - path: data/transacciones_retail.csv
      hash: md5
      md5: 5d295417e543b29d40366cd75fb4c75a
      size: 45580638
    - path: src/preparation.py
      hash: md5
      md5: 8d100fd9e06ccb059319a3351f371489
      size: 2085
    params:
      params.yaml:
        preparation.columns:
        - InvoiceNo
        - StockCode
        - Description
        - Quantity
        - InvoiceDate
        - UnitPrice
        - CustomerID
        - Country
        preparation.sample_size: 1.0
        preparation.types:
          columns:
            InvoiceNo: str
            StockCode: str
            Description: str
            Quantity: int
            InvoiceDate: datetime
            UnitPrice: float
            CustomerID: int
            Country: str
    outs:
    - path: data/prepared_data.csv
      hash: md5
      md5: 5b28d37dd56af62c2bb8fc83e7cfe4f3
      size: 35147693
  featurization:
    cmd: python src/featurization.py
    deps:
    - path: data/prepared_data.csv
      hash: md5
      md5: 5b28d37dd56af62c2bb8fc83e7cfe4f3
      size: 35147693
    - path: src/featurization.py
      hash: md5
      md5: 8f0ac9205a647e19908228c90daa06fd
      size: 2936
    params:
      params.yaml:
        featurization.columns:
        - customer_id
        - recency
        - frequency
        - monetary
        - is_churn
        featurization.types:
          columns:
            customer_id: int
            recency: float
            frequency: float
            monetary: float
            is_churn: bool
    outs:
    - path: data/featurization_data.csv
      hash: md5
      md5: 419db29a679ea38984227fd1c0591905
      size: 222160
  training:
    cmd: python src/training.py
    deps:
    - path: data/featurization_data.csv
      hash: md5
      md5: 419db29a679ea38984227fd1c0591905
      size: 222160
    - path: src/training.py
      hash: md5
      md5: 3fa468f39d756ce1be5df969431f362c
      size: 3164
    params:
      params.yaml:
        variables.random_state: 42
        variables.test_size: 0.2
        variables.train_size: 0.8
    outs:
    - path: data/metrics_model.json
      hash: md5
      md5: 5a042a84af08de6aa3d685a7922737b3
      size: 159
